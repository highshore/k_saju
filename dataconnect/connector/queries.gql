# List all Places (geo meeting points)
query ListPlaces @auth(level: PUBLIC) {
  places(order_by: { city: ASC, district: ASC }) {
    id
    region
    city
    district
    postalCode
    addressLine
    placeLabel
    latitude
    longitude
  }
}

# List all Locations (listings)
query ListLocations @auth(level: PUBLIC) {
  locations(order_by: { createdAt: DESC }) {
    id
    title
    tagline
    photos_on_location(order_by: { sortOrder: ASC }, limit: 1) {
      imageUrl
    }
    languagePrimary
    activityLevel
    skillLevel
    maxGuestsTotal
    minAge
    currency
    basePricePerGuest
    freeCancellation
    freeCancelCutoffHours
    meetingPointNote
    isActive
    createdAt
    host {
      id
      displayName
    }
    place {
      id
      city
      district
      placeLabel
    }
    stats_on_location {
      ratingAvg
      ratingCount
      lastReviewAt
    }
  }
}

# Get a Location (listing) by id
query GetLocationById($id: UUID!) @auth(level: PUBLIC) {
  location(id: $id) {
    id
    title
    longDescription
    languagePrimary
    activityLevel
    skillLevel
    maxGuestsTotal
    minAge
    currency
    basePricePerGuest
    freeCancellation
    freeCancelCutoffHours
    meetingPointNote
    isActive
    createdAt
    host { id displayName }
    place { id region city district postalCode addressLine placeLabel latitude longitude }
    photos_on_location { id imageUrl sortOrder }
    highlights_on_location { id label sortOrder }
    steps_on_location { id title description sortOrder }
    whatToBring_on_location { id itemText sortOrder }
    languages_on_location { lang }
    requirements_on_location { id text sortOrder }
    sessions_on_location { id startsAt endsAt capacityTotal capacityAvailable pricePerGuest currency }
    reviews_on_location { id reviewerName reviewerLocation rating body createdAt translation }
    stats_on_location { ratingAvg ratingCount lastReviewAt }
  }
}
