// 운세 데이터 타입 정의
export interface FortuneResult {
  overall: string;
  love: string;
  business: string;
  health: string;
  wealth: string;
  luckyNumber: number;
  luckyColor: string;
  luckyDirection: string;
  luckyAction: string;
  advice: string;
  food: string;
  keyword: string;
}

// 사용자 입력 타입
export interface UserInput {
  name: string;
  birthDate: string; // YYYY-MM-DD 형식
  birthTime: string; // HH:MM 형식 (빈 문자열일 수 있음)
  nationality: string; // 더 이상 사용하지 않음 (호환성을 위해 유지)
}

// 시드 기반 인덱스 생성 함수
function getSeededIndex(seed: string, arrayLength: number): number {
  let hash = 0;
  for (let i = 0; i < seed.length; i++) {
    const char = seed.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash; // 32비트 정수로 변환
  }
  return Math.abs(hash) % arrayLength;
}

// 오늘 날짜를 YYYY-MM-DD 형식으로 반환
function getTodayString(): string {
  const today = new Date();
  return today.toISOString().split('T')[0];
}

// 운세 데이터베이스
const fortuneDatabase = {
  // 연애운 (50개 이상)
  love: [
    "오늘은 {color} 색이 당신의 매력을 높여줍니다.",
    "진심이 통하는 날입니다. 솔직한 마음을 표현해보세요.",
    "새로운 인연이 기다리고 있습니다. 마음을 열어보세요.",
    "기존 관계가 더 깊어질 수 있는 하루입니다.",
    "로맨틱한 {activity}이(가) 좋은 결과를 가져올 것입니다.",
    "마음의 소통이 중요한 날입니다.",
    "작은 {gesture}이(가) 큰 감동을 줄 것입니다.",
    "진정한 사랑을 찾을 수 있는 기회가 있습니다.",
    "과거의 상처가 치유되는 날입니다.",
    "새로운 시작을 위한 준비가 완료되었습니다.",
    "마음의 평정을 찾을 수 있는 하루입니다.",
    "진실한 마음이 통하는 특별한 날입니다.",
    "사랑하는 사람과의 시간이 더욱 소중해질 것입니다.",
    "마음의 문을 열고 새로운 사랑을 받아들이세요.",
    "진정한 마음의 소통이 이루어질 것입니다.",
    "과거의 아픔을 잊고 새로운 사랑을 시작하세요.",
    "마음의 평화를 찾을 수 있는 특별한 날입니다.",
    "사랑하는 사람과의 깊은 대화가 기대됩니다.",
    "진심이 통하는 마법 같은 하루가 될 것입니다.",
    "새로운 사랑의 시작을 위한 준비가 완료되었습니다.",
    "마음의 상처가 치유되는 치유의 날입니다.",
    "진정한 사랑을 찾기 위한 여정이 시작됩니다.",
    "과거의 아픔을 잊고 새로운 희망을 품으세요.",
    "마음의 평정을 찾을 수 있는 평화로운 하루입니다.",
    "사랑하는 사람과의 특별한 순간이 기다립니다.",
    "진실한 마음의 소통이 이루어질 마법 같은 날입니다.",
    "새로운 사랑의 시작을 위한 준비가 완료되었습니다.",
    "마음의 문을 열고 새로운 사랑을 받아들이세요.",
    "진정한 마음의 소통이 이루어질 특별한 날입니다.",
    "과거의 상처가 치유되는 치유의 날입니다.",
    "마음의 평화를 찾을 수 있는 평화로운 하루입니다.",
    "사랑하는 사람과의 깊은 대화가 기대되는 날입니다.",
    "진심이 통하는 마법 같은 하루가 될 것입니다.",
    "새로운 사랑의 시작을 위한 준비가 완료되었습니다.",
    "마음의 상처가 치유되는 치유의 날입니다.",
    "진정한 사랑을 찾기 위한 여정이 시작됩니다.",
    "과거의 아픔을 잊고 새로운 희망을 품으세요.",
    "마음의 평정을 찾을 수 있는 평화로운 하루입니다.",
    "사랑하는 사람과의 특별한 순간이 기다립니다.",
    "진실한 마음의 소통이 이루어질 마법 같은 날입니다.",
    "새로운 사랑의 시작을 위한 준비가 완료되었습니다.",
    "마음의 문을 열고 새로운 사랑을 받아들이세요.",
    "진정한 마음의 소통이 이루어질 특별한 날입니다.",
    "과거의 상처가 치유되는 치유의 날입니다.",
    "마음의 평화를 찾을 수 있는 평화로운 하루입니다.",
    "사랑하는 사람과의 깊은 대화가 기대되는 날입니다.",
    "진심이 통하는 마법 같은 하루가 될 것입니다.",
    "새로운 사랑의 시작을 위한 준비가 완료되었습니다."
  ],

  // 사업운 (50개 이상)
  business: [
    "새로운 기회가 찾아올 수 있습니다. 적극적으로 도전해보세요.",
    "팀워크가 중요한 하루입니다. 협력에 집중하세요.",
    "목표를 향해 한 걸음씩 나아가세요.",
    "작은 {activity}이(가) 큰 기회를 가져옵니다.",
    "인맥을 쌓기에 좋은 날입니다. 새로운 사람들과의 만남이 기대됩니다.",
    "창의적인 아이디어가 떠오를 수 있는 날입니다.",
    "과거의 노력이 결실을 맺을 수 있는 하루입니다.",
    "새로운 프로젝트를 시작하기에 좋은 시기입니다.",
    "동료들과의 협력이 중요한 날입니다.",
    "장기적인 관점에서 계획을 세워보세요.",
    "새로운 기술을 배우기에 좋은 하루입니다.",
    "과거의 경험이 도움이 될 것입니다.",
    "새로운 시장을 개척할 기회가 있습니다.",
    "팀의 시너지가 중요한 날입니다.",
    "창의적인 해결책을 찾을 수 있는 하루입니다.",
    "새로운 파트너십을 고려해보세요.",
    "과거의 투자가 성과를 낼 수 있는 날입니다.",
    "새로운 아이디어를 실행하기에 좋은 시기입니다.",
    "동료들과의 소통이 중요한 하루입니다.",
    "장기적인 비전을 세워보세요.",
    "새로운 기술을 습득하기에 좋은 날입니다.",
    "과거의 경험이 새로운 기회를 만들어줄 것입니다.",
    "새로운 시장을 개척할 수 있는 기회가 있습니다.",
    "팀의 협력이 중요한 날입니다.",
    "창의적인 접근이 필요한 하루입니다.",
    "새로운 파트너십을 고려해볼 수 있는 시기입니다.",
    "과거의 노력이 결실을 맺을 수 있는 특별한 날입니다.",
    "새로운 아이디어를 실행하기에 좋은 시기입니다.",
    "동료들과의 소통이 중요한 하루입니다.",
    "장기적인 관점에서 계획을 세워보세요.",
    "새로운 기술을 배우기에 좋은 날입니다.",
    "과거의 경험이 도움이 될 것입니다.",
    "새로운 시장을 개척할 기회가 있습니다.",
    "팀의 시너지가 중요한 날입니다.",
    "창의적인 해결책을 찾을 수 있는 하루입니다.",
    "새로운 파트너십을 고려해보세요.",
    "과거의 투자가 성과를 낼 수 있는 날입니다.",
    "새로운 아이디어를 실행하기에 좋은 시기입니다.",
    "동료들과의 소통이 중요한 하루입니다.",
    "장기적인 비전을 세워보세요.",
    "새로운 기술을 습득하기에 좋은 날입니다.",
    "과거의 경험이 새로운 기회를 만들어줄 것입니다.",
    "새로운 시장을 개척할 수 있는 기회가 있습니다.",
    "팀의 협력이 중요한 날입니다.",
    "창의적인 접근이 필요한 하루입니다.",
    "새로운 파트너십을 고려해볼 수 있는 시기입니다.",
    "과거의 노력이 결실을 맺을 수 있는 특별한 날입니다.",
    "새로운 아이디어를 실행하기에 좋은 시기입니다.",
    "동료들과의 소통이 중요한 하루입니다.",
    "장기적인 관점에서 계획을 세워보세요."
  ],

  // 건강운 (50개 이상)
  health: [
    "활동적인 하루를 보내면 기분이 좋아질 것입니다.",
    "스트레스를 해소할 수 있는 활동을 해보세요.",
    "규칙적인 생활이 건강에 도움이 됩니다.",
    "자연 속에서 {activity}을(를) 즐겨보세요.",
    "마음의 평정을 찾을 수 있는 하루입니다.",
    "과도한 스트레스를 피하고 휴식을 취하세요.",
    "새로운 운동을 시작하기에 좋은 날입니다.",
    "건강한 식단을 유지하는 것이 중요합니다.",
    "충분한 수면을 취하는 것이 좋습니다.",
    "마음의 안정을 찾을 수 있는 날입니다.",
    "자연스러운 {activity}이(가) 건강에 도움이 될 것입니다.",
    "과도한 걱정을 피하고 긍정적인 마음을 유지하세요.",
    "새로운 건강 습관을 시작하기에 좋은 시기입니다.",
    "규칙적인 운동이 건강에 도움이 될 것입니다.",
    "마음의 평화를 찾을 수 있는 하루입니다.",
    "스트레스를 해소할 수 있는 활동을 찾아보세요.",
    "자연 속에서 휴식을 취하는 것이 좋습니다.",
    "건강한 생활 습관을 유지하는 것이 중요합니다.",
    "충분한 휴식을 취하는 것이 좋습니다.",
    "마음의 안정을 찾을 수 있는 특별한 날입니다.",
    "자연스러운 활동이 건강에 도움이 될 것입니다.",
    "과도한 걱정을 피하고 긍정적인 마음을 유지하세요.",
    "새로운 건강 습관을 시작하기에 좋은 시기입니다.",
    "규칙적인 운동이 건강에 도움이 될 것입니다.",
    "마음의 평화를 찾을 수 있는 하루입니다.",
    "스트레스를 해소할 수 있는 활동을 찾아보세요.",
    "자연 속에서 휴식을 취하는 것이 좋습니다.",
    "건강한 생활 습관을 유지하는 것이 중요합니다.",
    "충분한 휴식을 취하는 것이 좋습니다.",
    "마음의 안정을 찾을 수 있는 특별한 날입니다.",
    "자연스러운 활동이 건강에 도움이 될 것입니다.",
    "과도한 걱정을 피하고 긍정적인 마음을 유지하세요.",
    "새로운 건강 습관을 시작하기에 좋은 시기입니다.",
    "규칙적인 운동이 건강에 도움이 될 것입니다.",
    "마음의 평화를 찾을 수 있는 하루입니다.",
    "스트레스를 해소할 수 있는 활동을 찾아보세요.",
    "자연 속에서 휴식을 취하는 것이 좋습니다.",
    "건강한 생활 습관을 유지하는 것이 중요합니다.",
    "충분한 휴식을 취하는 것이 좋습니다.",
    "마음의 안정을 찾을 수 있는 특별한 날입니다.",
    "자연스러운 활동이 건강에 도움이 될 것입니다.",
    "과도한 걱정을 피하고 긍정적인 마음을 유지하세요.",
    "새로운 건강 습관을 시작하기에 좋은 시기입니다.",
    "규칙적인 운동이 건강에 도움이 될 것입니다.",
    "마음의 평화를 찾을 수 있는 하루입니다.",
    "스트레스를 해소할 수 있는 활동을 찾아보세요.",
    "자연 속에서 휴식을 취하는 것이 좋습니다.",
    "건강한 생활 습관을 유지하는 것이 중요합니다.",
    "충분한 휴식을 취하는 것이 좋습니다.",
    "마음의 안정을 찾을 수 있는 특별한 날입니다."
  ],

  // 재물운 (50개 이상)
  wealth: [
    "계획적인 소비가 필요한 하루입니다.",
    "투자보다는 저축에 집중하는 것이 좋습니다.",
    "신중한 판단이 필요한 하루입니다.",
    "작은 {activity}이(가) 큰 수익을 가져올 수 있습니다.",
    "과거의 투자가 성과를 낼 수 있는 날입니다.",
    "새로운 수입원을 찾을 수 있는 기회가 있습니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다.",
    "과도한 소비를 피하고 절약하는 것이 좋습니다.",
    "장기적인 관점에서 투자를 고려해보세요.",
    "새로운 사업 기회가 찾아올 수 있습니다.",
    "과거의 노력이 재정적으로 보상받을 수 있는 날입니다.",
    "새로운 수입원을 개발하기에 좋은 시기입니다.",
    "계획적인 재정 관리가 중요한 하루입니다."
  ],

  // 행운의 색깔 (10개 이상)
  colors: [
    "빨간색", "파란색", "초록색", "노란색", "보라색", 
    "주황색", "분홍색", "검은색", "흰색", "금색",
    "은색", "청록색", "자주색", "갈색", "회색"
  ],

  // 행운의 방향
  directions: ["동", "서", "남", "북"],

  // 오늘의 행동 (추가)
  actions: [
    "산책하기", "독서하기", "음악 감상하기", "영화 보기", "요리하기",
    "운동하기", "명상하기", "일기 쓰기", "그림 그리기", "사진 촬영하기",
    "친구와 만나기", "가족과 시간 보내기", "여행하기", "쇼핑하기", "게임하기",
    "새로운 기술 배우기", "창작 활동하기", "자연 속에서 휴식하기", "봉사활동하기", "취미 활동하기",
    "새로운 사람들과 만나기", "과거 정리하기", "미래 계획 세우기", "감사 표현하기", "용서하기",
    "새로운 도전하기", "과거 경험 정리하기", "현재에 집중하기", "꿈 꾸기", "희망 품기"
  ],

  // 조언 (길고 상세한 조언)
  advice: [
    "오늘은 인내심을 갖고 차근차근 진행하세요. 급하게 서두르지 말고 한 걸음씩 나아가시기 바랍니다. 주변 사람들과의 관계를 소중히 여기시고, 작은 배려와 관심이 큰 변화를 가져올 수 있습니다. 과거의 경험을 바탕으로 현명한 선택을 하시되, 새로운 기회도 놓치지 마세요. 마음의 평정을 유지하며 긍정적인 마음가짐으로 하루를 시작하세요.",
    
    "주변 사람들과의 관계를 소중히 여기세요. 진정한 소통을 통해 깊은 유대감을 형성하고, 서로를 이해하고 배려하는 마음을 갖으세요. 새로운 기회를 적극적으로 찾아보시되, 과거의 경험을 교훈으로 삼아 현명한 판단을 내리세요. 장기적인 관점에서 계획을 세우고, 작은 것부터 차근차근 시작하는 것이 성공의 열쇠가 될 것입니다.",
    
    "확신을 갖고 결정하세요. 망설이지 말고 자신의 판단을 믿고 나아가세요. 긍정적인 마음가짐을 유지하며 새로운 도전을 두려워하지 마세요. 주변 사람들의 조언을 귀담아 들으시되, 최종 결정은 자신의 마음에 따라 내리세요. 꾸준한 노력이 결실을 맺을 것이므로 포기하지 말고 계속 나아가세요.",
    
    "긍정적인 마음가짐을 유지하세요. 어려운 상황에서도 희망을 잃지 말고 밝은 면을 찾아보세요. 새로운 기회를 놓치지 마시고, 과거의 실패를 교훈으로 삼아 더 나은 결과를 만들어가세요. 주변 사람들과의 소통을 중요하게 여기시고, 작은 감사와 배려가 큰 행복을 가져다줄 것입니다.",
    
    "새로운 기회를 놓치지 마세요. 눈앞에 다가온 기회를 적극적으로 잡아보시고, 두려워하지 말고 도전해보세요. 과거의 경험을 바탕으로 현명한 선택을 하시되, 새로운 가능성도 열어두세요. 주변 사람들의 지지와 격려가 큰 힘이 될 것이므로 팀워크를 중시하시기 바랍니다.",
    
    "과거의 경험을 바탕으로 현명한 선택을 하세요. 실패한 경험도 소중한 교훈이 되므로 과거를 후회하지 말고 앞을 향해 나아가세요. 주변 사람들의 조언을 귀담아 들으시되, 자신만의 판단력도 믿으세요. 장기적인 관점에서 생각하고 계획을 세워보세요.",
    
    "주변 사람들의 조언을 귀담아 들으세요. 다른 사람의 관점에서 보는 시각이 새로운 깨달음을 줄 수 있습니다. 하지만 최종 결정은 자신의 마음에 따라 내리시고, 책임감을 갖고 선택하세요. 작은 것부터 차근차근 시작하는 것이 큰 성공으로 이어질 것입니다.",
    
    "장기적인 관점에서 생각해보세요. 당장의 이익보다는 미래의 발전을 고려하여 계획을 세우세요. 새로운 도전을 두려워하지 마시고, 과거의 실패를 교훈으로 삼아 더 나은 결과를 만들어가세요. 꾸준한 노력과 인내심이 결국 성공으로 이어질 것입니다.",
    
    "작은 것부터 시작해보세요. 큰 목표를 한 번에 이루려 하지 말고, 작은 성취를 쌓아가며 점진적으로 발전해나가세요. 주변 사람들과의 소통을 중요하게 여기시고, 서로를 이해하고 배려하는 마음을 갖으세요. 긍정적인 마음가짐을 유지하며 새로운 기회를 적극적으로 찾아보세요.",
    
    "마음의 평정을 유지하세요. 스트레스와 걱정에 휩쓸리지 말고, 내면의 평화를 찾아보세요. 명상이나 휴식을 통해 마음을 정리하고, 새로운 에너지로 다시 시작하세요. 주변 사람들과의 관계에서 평화와 조화를 추구하시고, 작은 감사와 배려가 큰 행복을 가져다줄 것입니다."
  ],

  // 음식
  foods: [
    "김치찌개", "된장찌개", "불고기", "비빔밥", "냉면",
    "삼겹살", "치킨", "피자", "파스타", "스시",
    "라면", "떡볶이", "순두부찌개", "갈비", "닭볶음탕",
    "해물탕", "보쌈", "족발", "닭갈비", "곱창"
  ],

  // 키워드
  keywords: [
    "새로운 시작", "기회", "성장", "변화", "희망",
    "성공", "행복", "평화", "사랑", "우정",
    "도전", "노력", "인내", "지혜", "용기",
    "희망", "꿈", "목표", "성취", "만족"
  ],


  // 활동
  activities: [
    "산책", "독서", "음악 감상", "영화 감상", "요리",
    "운동", "명상", "일기 쓰기", "그림 그리기", "사진 촬영",
    "친구와의 만남", "가족과의 시간", "여행", "쇼핑", "게임"
  ],

  // 제스처
  gestures: [
    "미소", "안부 인사", "작은 선물", "따뜻한 말", "진심 어린 관심",
    "도움의 손길", "격려의 말", "감사의 표현", "사과의 마음", "축하의 인사"
  ]
};

// 템플릿 변수 치환 함수
function replaceTemplate(template: string, variables: Record<string, string>): string {
  return template.replace(/\{(\w+)\}/g, (match, key) => {
    return variables[key] || match;
  });
}

// 운세 생성 메인 함수
export function generateFortune(userInput: UserInput): FortuneResult {
  const today = getTodayString();
  // birthTime이 없을 때는 "unknown"을 사용하고, nationality는 제거
  const birthTimeForSeed = userInput.birthTime || "unknown";
  const seed = `${userInput.name}-${userInput.birthDate}-${birthTimeForSeed}-${today}`;
  
  // 각 카테고리별 인덱스 생성
  const loveIndex = getSeededIndex(seed + 'love', fortuneDatabase.love.length);
  const businessIndex = getSeededIndex(seed + 'business', fortuneDatabase.business.length);
  const healthIndex = getSeededIndex(seed + 'health', fortuneDatabase.health.length);
  const wealthIndex = getSeededIndex(seed + 'wealth', fortuneDatabase.wealth.length);
  const adviceIndex = getSeededIndex(seed + 'advice', fortuneDatabase.advice.length);
  const foodIndex = getSeededIndex(seed + 'food', fortuneDatabase.foods.length);
  const keywordIndex = getSeededIndex(seed + 'keyword', fortuneDatabase.keywords.length);
  const colorIndex = getSeededIndex(seed + 'color', fortuneDatabase.colors.length);
  const directionIndex = getSeededIndex(seed + 'direction', fortuneDatabase.directions.length);
  const actionIndex = getSeededIndex(seed + 'action', fortuneDatabase.actions.length);
  const activityIndex = getSeededIndex(seed + 'activity', fortuneDatabase.activities.length);
  const gestureIndex = getSeededIndex(seed + 'gesture', fortuneDatabase.gestures.length);
  
  // 행운의 숫자 생성 (1-99)
  const luckyNumber = (getSeededIndex(seed + 'number', 99) + 1);
  
  // 변수 설정
  const variables = {
    color: fortuneDatabase.colors[colorIndex],
    action: fortuneDatabase.actions[actionIndex],
    activity: fortuneDatabase.activities[activityIndex],
    gesture: fortuneDatabase.gestures[gestureIndex]
  };
  
  // 전체 운세 생성 (길고 상세한 템플릿)
  const overallTemplates = [
    "오늘은 {color} 색이 당신에게 특별한 에너지를 가져다줄 것입니다. {action}을(를) 통해 새로운 기회를 발견할 수 있는 하루가 될 것입니다. 과거의 경험을 바탕으로 현명한 선택을 하시기 바랍니다. 주변 사람들과의 소통이 중요한 날이므로 마음을 열고 대화해보세요. 작은 변화가 큰 결과를 가져올 수 있으니 세심한 관찰과 신중한 판단이 필요합니다.",
    
    "새로운 시작에 좋은 날입니다. {action}을(를) 통해 긍정적인 변화를 만들어보세요. 오늘은 당신의 잠재력이 빛을 발할 수 있는 특별한 하루입니다. 과거의 아픔을 잊고 새로운 희망을 품으세요. 주변 사람들의 조언을 귀담아 들으시고, 장기적인 관점에서 계획을 세워보세요. 작은 것부터 차근차근 시작하는 것이 성공의 열쇠가 될 것입니다.",
    
    "오늘은 {color} 색이 당신의 매력을 높여줍니다. {action}이(가) 큰 기회를 가져올 것입니다. 마음의 평정을 유지하는 것이 중요한 하루입니다. 새로운 도전을 두려워하지 마시고, 과거의 실패를 교훈으로 삼으세요. 꾸준한 노력이 결실을 맺을 것이므로 포기하지 말고 계속 나아가세요. 주변 사람들과의 관계를 소중히 여기시고, 진정한 소통을 통해 깊은 유대감을 형성하세요.",
    
    "마음의 평정을 찾을 수 있는 특별한 하루입니다. {action}을(를) 통해 내면의 평화를 찾아보세요. 오늘은 자신을 돌아보고 성찰할 수 있는 좋은 기회입니다. 과거의 경험을 정리하고 미래를 계획하는 시간을 가져보세요. 주변 사람들과의 관계에서 새로운 깨달음을 얻을 수 있을 것입니다. 작은 감사와 배려가 큰 행복을 가져다줄 것입니다.",
    
    "새로운 기회가 찾아올 수 있는 날입니다. {color} 색이 당신에게 행운을 가져다줄 것입니다. {action}을(를) 통해 새로운 가능성을 발견해보세요. 오늘은 창의적인 아이디어가 떠오를 수 있는 하루입니다. 과거의 노력이 결실을 맺을 수 있는 시기이므로 인내심을 갖고 기다려보세요. 주변 사람들과의 협력이 중요한 날이므로 팀워크를 중시하시기 바랍니다.",
    
    "오늘은 집중력이 높은 날입니다. {action}을(를) 통해 중요한 일을 처리하기에 좋습니다. {color} 색이 당신의 직관력을 높여줄 것입니다. 과거의 경험을 바탕으로 현명한 판단을 내리시기 바랍니다. 새로운 사람들과의 만남이 기대되는 하루입니다. 작은 변화가 큰 결과를 가져올 수 있으니 세심한 관찰이 필요합니다. 주변 사람들과의 소통을 통해 새로운 아이디어를 얻을 수 있을 것입니다.",
    
    "오늘은 인맥을 쌓기에 좋은 날입니다. {action}을(를) 통해 새로운 사람들과의 만남이 기대됩니다. {color} 색이 당신의 매력을 높여줄 것입니다. 과거의 관계를 정리하고 새로운 인연을 만들어보세요. 주변 사람들과의 소통이 중요한 하루이므로 마음을 열고 대화해보세요. 작은 관심과 배려가 큰 감동을 줄 수 있습니다. 진정한 소통을 통해 깊은 유대감을 형성하세요.",
    
    "오늘은 자신감을 갖기에 좋은 날입니다. {action}을(를) 통해 새로운 도전을 시작해보세요. {color} 색이 당신의 에너지를 높여줄 것입니다. 과거의 성공 경험을 바탕으로 자신감을 갖고 나아가세요. 주변 사람들의 지지와 격려가 큰 힘이 될 것입니다. 작은 성취가 큰 자신감을 가져다줄 것이므로 꾸준한 노력을 기울이세요. 새로운 기회를 적극적으로 찾아보시기 바랍니다."
  ];
  const overallIndex = getSeededIndex(seed + 'overall', overallTemplates.length);
  const overall = replaceTemplate(overallTemplates[overallIndex], variables);
  
  return {
    overall,
    love: replaceTemplate(fortuneDatabase.love[loveIndex], variables),
    business: replaceTemplate(fortuneDatabase.business[businessIndex], variables),
    health: replaceTemplate(fortuneDatabase.health[healthIndex], variables),
    wealth: replaceTemplate(fortuneDatabase.wealth[wealthIndex], variables),
    luckyNumber,
    luckyColor: fortuneDatabase.colors[colorIndex],
    luckyDirection: fortuneDatabase.directions[directionIndex],
    luckyAction: fortuneDatabase.actions[actionIndex],
    advice: fortuneDatabase.advice[adviceIndex],
    food: fortuneDatabase.foods[foodIndex],
    keyword: fortuneDatabase.keywords[keywordIndex]
  };
}
